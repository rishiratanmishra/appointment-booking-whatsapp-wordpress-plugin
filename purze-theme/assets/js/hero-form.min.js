!function(){function e(e,t){return(t||document).querySelector(e)}function t(e){return(e||"").replace(/[^0-9+\-\s]/g,"")}function n(e){return(e||"").replace(/\D+/g,"")}function r(e){try{e.scrollIntoView({behavior:"smooth",block:"center"})}catch(e){}}function o(e,t,n){e.textContent=t||"",e.classList.toggle("error",!!n),e.classList.toggle("success",!n)}function a(a){var s=e("#"+a);if(!s)return;var i=e('button[type="submit"]',s),c=e(".purze-message",s);s.addEventListener("submit",(function(a){a.preventDefault(),o(c,"",!1),i&&(i.disabled=!0);var s=i?i.textContent:"";i&&(i.dataset.old=s,i.textContent="Sendingâ€¦");var d=new FormData(s),l=t(String(d.get("phone")||""));if(d.has("phone")&&d.set("phone",l),d.has("phone")&&n(l).length<7)return o(c,"Please enter a valid phone number (7+ digits).",!0),i&&(i.disabled=!1,i.textContent=i.dataset.old),void r(c);fetch(purzeAjax.url,{method:"POST",credentials:"same-origin",headers:{"X-WP-Nonce":purzeAjax.nonce},body:d}).then((function(e){return e.json()})).then((function(t){if(t&&t.success)o(c,t.data&&t.data.message?t.data.message:"Thank you!"),s.reset();else{var n=t&&t.data&&t.data.message?t.data.message:"Submission failed. Please try again.";if(o(c,n,!0),t&&t.data&&t.data.errors){var a=Object.keys(t.data.errors)[0],u=e('[name="'+a+'"]',s);u&&u.focus()}}r(c)})).catch((function(){o(c,"Network error. Please try again.",!0)})).finally((function(){i&&(i.disabled=!1,i.textContent=i.dataset.old)}))}))}document.addEventListener("DOMContentLoaded",(function(){a("purze-hero-form"),a("purze-contact-form")}))}();